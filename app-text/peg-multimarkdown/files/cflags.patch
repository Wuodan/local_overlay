--- Makefile.orig	2012-01-23 22:07:40.000000000 +0100
+++ Makefile	2012-04-21 16:33:29.194555178 +0200
@@ -18,26 +18,27 @@
 	FINALNOTES=Build complete.
 endif
 
-CFLAGS ?= -Wall -O3 -include GLibFacade.h -I ./ -D MD_USE_GET_OPT=1 
+OFLAGS = $(CFLAGS)
+LDFLAGS += -include GLibFacade.h -I ./ -D MD_USE_GET_OPT=1 
 ifeq ($(UNAME), SunOS)
 	CC = gcc
 	# Use of <stdbool.h> is valid only in a c99 compilation environment
-	CFLAGS += --std=c99
+	OFLAGS += --std=c99
 else
-	CFLAGS += -ansi
+	OFLAGS += -ansi
 endif
 
 # make ARCH=ppc
 # build for ppc architecture - Only works on machines with PPC compilation support installed
 # probably only Snow Leopard machines with Xcode 3 installed
 ifeq ($(ARCH), ppc)
-	CFLAGS += -arch ppc
+	OFLAGS += -arch ppc
 endif
 
 # make ARCH=i386
 # build for i386 architecture - useful with older machines or those running 10.4?
 ifeq ($(ARCH), i386)
-	CFLAGS += -arch i386
+	OFLAGS += -arch i386
 endif
 
 OBJS=markdown_parser.o markdown_output.o markdown_lib.o GLibFacade.o
@@ -53,10 +54,10 @@
 	CC=gcc $(MAKE) -C $(PEGDIR)
 
 %.o : %.c markdown_peg.h
-	$(CC) -c $(CFLAGS) -o $@ $<
+	$(CC) -c $(OFLAGS) -o $@ $<
 
 $(PROGRAM) : markdown.c $(OBJS)
-	$(CC) $(CFLAGS) -o $@ $(OBJS) $<
+	$(CC) $(OFLAGS) $(LDFLAGS) -o $@ $(OBJS) $<
 	@echo "$(FINALNOTES)"
 
 markdown_parser.c : markdown_parser.leg $(LEG) markdown_peg.h parsing_functions.c utility_functions.c
